# 2：航向融合代码生成

根据`R_to_earth(2, 0)) < fabsf(_R_to_earth(2, 1)`决定使用哪种旋转顺序，又因为ｙ=z-Hx,H为测量传递矩阵，ｘ为我们估计的状态，ｚ为测量状态，我们通过四元数计算出航向，即`angMeasA = atan(R_to_earth[1,0]/R_to_earth[0,0])`，此过程不依赖地磁测量，因此可以等价于Hx.

接下来求解Ｈ矩阵，即为矩阵ｚ/矩阵x，即该矩阵的雅克比矩阵：`H_YAW321_A = Matrix([angMeasA]).jacobian(state)`,确定测量转移矩阵Ｈ。

接下来为了避免奇异解，`angMeasB = pi/2 - atan(R_to_earth[0,0]/R_to_earth[1,0])`

与上面的结构类似，再往下是第二个旋转顺序312
